#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define HEALTHY 0 // Κατάσταση 0  = Υγιής
#define INFECTED 1 // Κατάσταση 1 = Μολυσμένος
#define N 1000 //Αριθμός Κόμβων

int main(){
    srand(time(NULL));

    FILE *fptr;

    fptr = fopen("infectC.txt","w");

    //Πίνακας των κόμβων
    int nodes[N] = {HEALTHY};

    //Get τον πρώτο infected κόμβο
    int infection = rand() % 1000;

    //Initialize το πρώτο infected κόμβο
    nodes[infection] = INFECTED;

    //Αύξηση του Counter των μολυσμένων
    int infectedCounter = 1;

    //Initialize τα steps 
    int steps = 0;   

    //Μετάδοση της μόλυνσης
    while(infectedCounter<N){

        //Αύξηση της μετάδοσης adjust τον αριθμό για increased infectionRate
        int infectionRate = 5;


        //Αύξηση των πιθανών μελλοντικών μολυσμένων κόμβων
        for(int i = 0; i < infectedCounter * infectionRate; ++i){
            infection = rand() % 1000;
            nodes[infection] = INFECTED;
        }
        infectedCounter = 0;
        for(int j = 0; j < N; ++j){
            if(nodes[j] == INFECTED)
            {
                infectedCounter++;
            }
        }
        steps++;
        //printf("Step:%d Nodes:%d \n",steps,infectedCounter);
        fprintf(fptr,"Step:%d | TotalNodes:%d \n",steps,infectedCounter);
    }

    return 0;

}